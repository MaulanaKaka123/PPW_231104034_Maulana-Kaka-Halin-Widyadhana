<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Judul akan diubah oleh JS -->
    <title>Detail Produk - Toko Online</title>
    
    <!-- 1. Memuat Bootstrap CSS (Perbaikan typo integrity) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- 2. (Opsional) Memuat Ikon Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- 3. CSS Kustom -->
    <style>
        /* Kustomisasi tinggi gambar carousel untuk halaman detail */
        #productCarousel .carousel-item img {
            height: 25rem; /* Lebih tinggi dari banner di index */
            object-fit: contain; /* 'contain' agar seluruh produk terlihat */
            background-color: #f8f9fa;
        }

        /* Memberi warna pada indikator carousel */
        .carousel-indicators [data-bs-target] {
            background-color: #0d6efd; /* Warna biru primer Bootstrap */
        }
    </style>
</head>
<body class="bg-light text-dark">

    <!-- Kontainer Halaman Utama -->
    <div class="container my-4">

        <!-- 1. HEADER (Sama seperti di beranda.html) -->
        <header class="mb-4">
            <nav class="navbar navbar-expand-lg bg-white shadow-sm rounded-3 py-3">
                <div class="container-fluid px-4">
                    <!-- Logo dan Nama Web (Link ke beranda.html) -->
                    <a class="navbar-brand fs-4 fw-bold text-primary" href="beranda.html">LOGO - Onglen Sop</a>
                    
                    <span class="navbar-text fs-5 fw-semibold text-secondary position-absolute start-50 translate-middle-x d-none d-lg-block">
                        HEADER
                    </span>
                     
                    <!-- Judul Header (Tengah - Mobile) -->
                    <!-- Menggunakan mx-auto untuk memusatkan antara Logo dan Toggler di mobile -->
                    <span class="navbar-text fs-5 fw-semibold text-secondary mx-auto d-lg-none">
                        HEADER
                    </span>
                    
                    <!-- Navbar Links -->
                    <!-- Tombol Toggler untuk mobile -->
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto gap-2">
                            <li class="nav-item">
                                <a class="nav-link" href="beranda.html">Beranda</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#">Produk</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Login</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

        <!-- 2. KONTEN UTAMA (Detail Produk) -->
        <main class="bg-white shadow-sm rounded-3 p-4 p-md-5">
            <div class="row g-4 g-lg-5">

                <!-- Kolom Kiri: Tombol Back dan Image Slider -->
                <div class="col-lg-6">
                    <!-- Tombol Back -->
                    <a href="beranda.html" class="btn btn-outline-secondary mb-3">
                        <i class="bi bi-arrow-left me-2"></i>
                        Kembali ke Beranda
                    </a>
                    
                    <!-- Image Slider (Bootstrap Carousel) -->
                    <div id="productCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
                        <!-- Indikator akan diisi oleh JavaScript -->
                        <div class="carousel-indicators" id="product-carousel-indicators">
                            <!-- Contoh: <button type="button" data-bs-target="#productCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button> -->
                        </div>
                        <!-- Gambar akan diisi oleh JavaScript -->
                        <div class="carousel-inner rounded-3 border" id="product-carousel-inner">
                            <!-- Contoh: 
                            <div class="carousel-item active">
                                <img src="images/produk-1-a.jpg" class="d-block w-100" alt="Gambar Produk 1 - Tampilan 1">
                            </div> 
                            -->
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide-to="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide-to="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>

                <!-- ===== BAGIAN YANG HILANG (KOLOM KANAN) ===== -->
                <!-- Kolom Kanan: Deskripsi Barang dan Tombol Add to Cart -->
                <div class="col-lg-6">
                    <!-- Judul Produk (diberi id) -->
                    <h1 class="display-4 fw-bold" id="product-name">Nama Produk</h1>
                    
                    <!-- Harga Produk (diberi id) -->
                    <p class="display-5 fw-bold text-primary my-3" id="product-price">Rp 0</p>
                    
                    <!-- Deskripsi Barang (diberi id) -->
                    <h3 class="fs-5 fw-semibold mt-4 border-top pt-3">Deskripsi Barang</h3>
                    <p class="text-muted" id="product-description">
                        Deskripsi produk akan dimuat di sini...
                    </p>
                    
                    <!-- Form Add to Cart -->
                    <div class="d-grid gap-2 mt-4 pt-3 border-top">
                        <!-- Pilihan Kuantitas -->
                        <div class="row align-items-center mb-3">
                            <label for="quantity" class="col-auto col-form-label fs-5">Kuantitas:</label>
                            <div class="col-auto">
                                <input type="number" id="quantity" class="form-control form-control-lg text-center" value="1" min="1" style="width: 5rem;">
                            </div>
                        </div>
                        
                        <!-- Tombol Add to Cart (diberi id) -->
                        <button id="add-to-cart-btn" class="btn btn-success btn-lg w-100 fw-bold py-3" type="button">
                            <i class="bi bi-cart-plus-fill me-2"></i>
                            Add to Cart
                        </button>
                    </div>
                </div>
                <!-- ===== AKHIR BAGIAN YANG HILANG ===== -->

            </div> <!-- Penutup <div class="row g-4 g-lg-5"> -->


            <!-- ===== BAGIAN BARU: PRODUK TERKAIT ===== -->
            <hr class="my-4 my-md-5">

            <div class="row">
                <div class="col-12">
                    <h2 class="fs-3 fw-bold mb-4">Produk Terkait Lainnya</h2>
                </div>

                <!-- Kartu Produk Terkait 1 (Sesuai gambar: img + button) -->
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="card text-center border-0 shadow-sm mb-4">
                        <a href="#">
                            <img src="assets/image/produk-terkait-1.jpg" class="card-img-top p-2" alt="Produk Terkait 2" style="height: 10rem; object-fit: contain;">
                        </a>
                        <div class="card-body pt-0">
                            <a href="#" class="btn btn-outline-primary btn-sm w-100">
                                Lihat Detail
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Kartu Produk Terkait 2 -->
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="card text-center border-0 shadow-sm mb-4">
                        <a href="#">
                            <img src="assets/image/produk-terkait-2.jpg" class="card-img-top p-2" alt="Produk Terkait 3" style="height: 10rem; object-fit: contain;">
                        </a>
                        <div class="card-body pt-0">
                            <a href="#" class="btn btn-outline-primary btn-sm w-100">
                                Lihat Detail
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Kartu Produk Terkait 3 (Placeholder) -->
                <div class="col-6 col-md-4 col-lg-3 d-none d-md-block">
                    <div class="card text-center border-0 shadow-sm mb-4">
                        <a href="#">
                            <img src="assets/image/produk-terkait-3.jpg" class="card-img-top p-2" alt="Produk Terkait 4" style="height: 10rem; object-fit: contain;">
                        </a>
                        <div class="card-body pt-0">
                            <a href="#" class="btn btn-outline-primary btn-sm w-100">
                                Lihat Detail
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Kartu Produk Terkait 4 (Placeholder) -->
                <div class="col-6 col-md-4 col-lg-3 d-none d-lg-block">
                    <div class="card text-center border-0 shadow-sm mb-4">
                        <a href="#">
                            <img src="assets/image/produk-terkait-4.jpg" class="card-img-top p-2" alt="Produk Terkait 5" style="height: 10rem; object-fit: contain;">
                        </a>
                        <div class="card-body pt-0">
                            <a href="#" class="btn btn-outline-primary btn-sm w-100">
                                Lihat Detail
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-6 col-md-4 col-lg-3 d-none d-lg-block">
                    <div class="card text-center border-0 shadow-sm mb-4">
                        <a href="#">
                            <img src="assets/image/produk-terkait-5.jpg" class="card-img-top p-2" alt="Produk Terkait 6" style="height: 10rem; object-fit: contain;">
                        </a>
                        <div class="card-body pt-0">
                            <a href="#" class="btn btn-outline-primary btn-sm w-100">
                                Lihat Detail
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-6 col-md-4 col-lg-3 d-none d-lg-block">
                    <div class="card text-center border-0 shadow-sm mb-4">
                        <a href="#">
                            <img src="assets/image/rekomendasi-1.jpeg" class="card-img-top p-2" alt="Produk Terkait 7" style="height: 10rem; object-fit: contain;">
                        </a>
                        <div class="card-body pt-0">
                            <a href="#" class="btn btn-outline-primary btn-sm w-100">
                                Lihat Detail
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-6 col-md-4 col-lg-3 d-none d-lg-block">
                    <div class="card text-center border-0 shadow-sm mb-4">
                        <a href="#">
                            <img src="assets/image/rekomendasi-2.jpg" class="card-img-top p-2" alt="Produk Terkait 8" style="height: 10rem; object-fit: contain;">
                        </a>
                        <div class="card-body pt-0">
                            <a href="#" class="btn btn-outline-primary btn-sm w-100">
                                Lihat Detail
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-6 col-md-4 col-lg-3 d-none d-lg-block">
                    <div class="card text-center border-0 shadow-sm mb-4">
                        <a href="#">
                            <img src="assets/image/produk-terkait-6.jpg" class="card-img-top p-2" alt="Produk Terkait 9" style="height: 10rem; object-fit: contain;">
                        </a>
                        <div class="card-body pt-0">
                            <a href="#" class="btn btn-outline-primary btn-sm w-100">
                                Lihat Detail
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <!-- ===== AKHIR BAGIAN BARU ===== -->

        </main>

        <!-- 4. FOOTER (Sama seperti di beranda.html) -->
        <footer class="bg-white text-muted text-center py-4 mt-4 shadow-sm rounded-3">
            <p class="mb-0">&copy; 2025 Onglen Sop by Maulana Kaka Halin Widyadhana 2311100434. All rights reserved.</p>
        </footer>

    </div> <!-- Penutup Kontainer Halaman Utama -->

    <!-- 5. TEMPAT "SNACK BAR" / TOAST NOTIFIKASI -->
    <!-- Diletakkan di pojok kanan bawah -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="add-to-cart-toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-success text-white">
                <i class="bi bi-check-circle-fill me-2"></i>
                <strong class="me-auto">Sukses!</strong>
                <small>Baru saja</small>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                <span id="toast-product-name">Produk</span> berhasil ditambahkan ke keranjang.
            </div>
        </div>
    </div>


    <!-- 4. Memuat JQuery (Harus sebelum Bootstrap JS) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    
    <!-- 5. Memuat Bootstrap JS Bundle (termasuk Popper.js) (Perbaikan typo integrity) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- 6. SCRIPT KUSTOM UNTUK MEMUAT DETAIL PRODUK -->
    <script>
        // Data produk "dummy" kita. 
        // Di aplikasi nyata, ini akan berasal dari database.
        const productData = {
            '1': {
                name: "Phainon Cosplay Costume",
                price: "Rp 2.300.000",
                description: "Kostum cosplay karakter Honkai Star Rail, Phainon.",
                images: ["assets/image/produk-1.webp", "assets/image/tampilan-produk-1-2.jpg", "assets/image/tampilan-produk-1-1.jpg"]
            },
            '2': {
                name: "Dream Journey Cosplay Costume",
                price: "Rp 2.250.000",
                description: "Kostum cosplay karakter Umamusume Pretty Derby, Dream Journey",
                images: ["assets/image/produk-2.jpg", "assets/image/tampilan-produk-2-1.jpg", "assets/image/tampilan-produk-2-2.jpg"]
            },
            '3': {
                name: "Sakura Bakushin O Cosplay Costume",
                price: "Rp 1.850.000",
                description: "Kostum cosplay karakter Umamusume Pretty Derby, Sakura Bakushin O",
                images: ["assets/image/produk-3.jpg", "assets/image/tampilan-produk-3-1.jpg", "assets/image/tampilan-produk-3-2.jpg"]
            },
            '4': {
                name: "Oguri Cap Cosplay Costume",
                price: "Rp 1.850.000",
                description: "Kostum cosplay karakter Umamusume Pretty Derby, Oguri Cap",
                images: ["assets/image/produk-4.webp", "assets/image/tampilan-produk-4-1.webp", "assets/image/tampilan-produk-4-2.webp"]
            },
            '5': {
                name: "Satono Diamond Cosplay Costume",
                price: "Rp 1.850.000",
                description: "Kostum cosplay karakter Umamusume Pretty Derby, Satono Diamond",
                images: ["assets/image/produk-5.jpg", "assets/image/tampilan-produk-5-1.jpg", "assets/image/tampilan-produk-5-2.webp"]
            },
            '6': {
                name: "Nakayama Festa Cosplay Costume",
                price: "Rp 1.850.000",
                description: "Kostum cosplay karakter Umamusume Pretty Derby, Nakayama Festa",
                images: ["assets/image/produk-6.jpg", "assets/image/tampilan-produk-6-1.jpg", "assets/image/tampilan-produk-6-2.jpg"]
            },
            'default': {
                name: "Produk Tidak Ditemukan",
                price: "Rp 0",
                description: "Maaf, produk yang Anda cari tidak tersedia. Silakan kembali ke beranda.",
                images: ["images/placeholder.jpg"]
            }
        };
        // Fungsi ini akan berjalan setelah halaman HTML selesai dimuat
        $(document).ready(function() {
            
            // --- BAGIAN 1: MEMUAT KONTEN PRODUK DINAMIS ---
            
            // 1. Dapatkan parameter 'id' dari URL
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            
            // 2. Cari data produk berdasarkan id
            const product = productData[productId];

            // 3. Update konten halaman JIKA produk ditemukan
            if (product) {
                // Update teks (nama, harga, deskripsi)
                $('#product-name').text(product.name);
                $('#product-price').text(product.price);
                $('#product-description').text(product.description);

                // Update Image Slider (Carousel)
                const carouselInner = $('#product-carousel-inner');
                const carouselIndicators = $('#product-carousel-indicators');
                
                // Kosongkan placeholder
                carouselInner.empty();
                carouselIndicators.empty();
                
                // Loop (ulangi) untuk setiap gambar di data produk
                product.images.forEach((imgSrc, index) => {
                    // Buat status 'active' hanya untuk gambar pertama
                    const activeClass = (index === 0) ? 'active' : '';
                    
                    // Buat HTML untuk item carousel (gambar)
                    const carouselItem = `
                        <div class="carousel-item ${activeClass}">
                            <img src="${imgSrc}" class="d-block w-100" alt="Gambar ${product.name} ${index + 1}" style="height: 25rem; object-fit: cover;">
                        </div>
                    `;
                    // Tambahkan ke dalam slider
                    carouselInner.append(carouselItem);
                    
                    // Buat HTML untuk indikator (tombol titik)
                    const indicatorButton = `
                        <button type"button" data-bs-target="#product-carousel" data-bs-slide-to="${index}" class="${activeClass}" aria-current="${index === 0}" aria-label="Slide ${index + 1}"></button>
                    `;
                    // Tambahkan ke dalam wadah indikator
                    carouselIndicators.append(indicatorButton);
                });
            } else {
                // Jika ID tidak ditemukan atau tidak valid
                $('#product-name').text("Produk Tidak Ditemukan");
                $('#product-price').text("Rp -");
                $('#product-description').text("Maaf, produk yang Anda cari tidak tersedia.");
            }
            
            // 4. Update Produk Terkait (filter agar tidak menampilkan produk yg sedang dilihat)
            const relatedProductsContainer = $('#related-products');
            relatedProductsContainer.empty(); // Kosongkan
            
            for (const id in productData) {
                // Jangan tampilkan produk yang sedang dibuka sebagai "terkait"
                if (id !== productId) {
                    const relatedProduct = productData[id];
                    const relatedCard = `
                        <div class="col">
                            <div class="card h-100 shadow-sm border-0">
                                <a href="detail.html?id=${id}">
                                    <img src="${relatedProduct.images[0]}" class="card-img-top" alt="${relatedProduct.name}" style="height: 8rem; object-fit: cover;">
                                </a>
                                <div class="card-body p-2">
                                    <a href="detail.html?id=${id}" class="btn btn-sm btn-outline-secondary w-100">Lihat Detail</a>
                                 </div>
                            </div>
                        </div>
                    `;
                    relatedProductsContainer.append(relatedCard);
                }
            }


            // --- BAGIAN 2: FUNGSI "ADD TO CART" SNACK BAR (TOAST) ---

            // 1. Siapkan komponen Toast Bootstrap
            const toastEl = document.getElementById('add-to-cart-toast');
            // Atur durasi toast muncul (3000ms = 3 detik)
            const toast = new bootstrap.Toast(toastEl, { delay: 3000 }); 

            // 2. Beri "event listener" pada tombol Add to Cart
            // Saat tombol dengan id="add-to-cart-btn" di-klik:
            $('#add-to-cart-btn').on('click', function() {
                // Ambil nama produk dan kuantitas
                const productName = $('#product-name').text();
                const qty = $('#quantity').val();

                // Update teks di dalam toast
                $('#toast-product-name').text(productName + ' (x' + qty + ')');
                
                // Tampilkan toast
                toast.show(); 
            });
        });
    </script>
</body>
</html>